function enviraGetColWidth(t,e){var i,n=jQuery(window).width(),o=t.data("envira-columns");switch(o){case 1:i=t.width();break;case 2:i=480>=n?t.width():t.width()/2;break;case 3:i=480>=n?t.width():768>=n?t.width()/2:t.width()/3;case 4:case 5:case 6:i=480>=n?t.width():768>=n?t.width()/2:1024>=n?t.width()/3:t.width()/o}return parseInt(i-e*(o-1)/o)}function enviraSetWidths(t,e){var i=enviraGetColWidth(t,e);t.children().css({width:i})}function enviraIsMobile(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t}function enviraThrottle(t,e){return function(){var i=this,n=[].slice(arguments);clearTimeout(t._throttleTimeout),t._throttleTimeout=setTimeout(function(){t.apply(i,n)},e)}}!function(t,e,i){var n=t.document,o=n.documentElement,s=t.Modernizr,r=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a="Moz Webkit O Ms".split(" "),l=function(t){var e=o.style,i;if("string"==typeof e[t])return t;t=r(t);for(var n=0,s=a.length;s>n;n++)if(i=a[n]+t,"string"==typeof e[i])return i},h=l("transform"),c=l("transitionProperty"),d={csstransforms:function(){return!!h},csstransforms3d:function(){var t=!!l("perspective");if(t&&"webkitPerspective"in o.style){var i=e("<style>@media (transform-3d),(-webkit-transform-3d){#modernizr{height:3px}}</style>").appendTo("head"),n=e('<div id="modernizr" />').appendTo("html");t=3===n.height(),n.remove(),i.remove()}return t},csstransitions:function(){return!!c}},u;if(s)for(u in d)s.hasOwnProperty(u)||s.addTest(u,d[u]);else{s=t.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var p=" ",f;for(u in d)f=d[u](),s[u]=f,p+=" "+(f?"":"no-")+u;e("html").addClass(p)}if(s.csstransforms){var m=s.csstransforms3d?{translate:function(t){return"translate3d("+t[0]+"px, "+t[1]+"px, 0) "},scale:function(t){return"scale3d("+t+", "+t+", 1) "}}:{translate:function(t){return"translate("+t[0]+"px, "+t[1]+"px) "},scale:function(t){return"scale("+t+") "}},g=function(t,i,n){var o=e.data(t,"isoTransform")||{},s={},r,a={},l;s[i]=n,e.extend(o,s);for(r in o)l=o[r],a[r]=m[r](l);var c=a.translate||"",d=a.scale||"",u=c+d;e.data(t,"isoTransform",o),t.style[h]=u};e.cssNumber.scale=!0,e.cssHooks.scale={set:function(t,e){g(t,"scale",e)},get:function(t,i){var n=e.data(t,"isoTransform");return n&&n.scale?n.scale:1}},e.fx.step.scale=function(t){e.cssHooks.scale.set(t.elem,t.now+t.unit)},e.cssNumber.translate=!0,e.cssHooks.translate={set:function(t,e){g(t,"translate",e)},get:function(t,i){var n=e.data(t,"isoTransform");return n&&n.translate?n.translate:[0,0]}}}var v,y;s.csstransitions&&(v={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[c],y=l("transitionDuration"));var w=e.event,x=e.event.handle?"handle":"dispatch",b;w.special.smartresize={setup:function(){e(this).bind("resize",w.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",w.special.smartresize.handler)},handler:function(t,e){var i=this,n=arguments;t.type="smartresize",b&&clearTimeout(b),b=setTimeout(function(){w[x].apply(i,n)},"execAsap"===e?0:100)}},e.fn.smartresize=function(t){return t?this.bind("smartresize",t):this.trigger("smartresize",["execAsap"])},e.Isotope=function(t,i,n){this.element=e(i),this._create(t),this._init(n)};var _=["width","height"],C=e(t);e.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},e.Isotope.prototype={_create:function(t){this.options=e.extend({},e.Isotope.settings,t),this.styleQueue=[],this.elemCount=0;var i=this.element[0].style;this.originalStyle={};var n=_.slice(0);for(var o in this.options.containerStyle)n.push(o);for(var s=0,r=n.length;r>s;s++)o=n[s],this.originalStyle[o]=i[o]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var a={"original-order":function(t,e){return e.elemCount++,e.elemCount},random:function(){return Math.random()}};this.options.getSortData=e.extend(this.options.getSortData,a),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var l=this;setTimeout(function(){l.element.addClass(l.options.containerClass)},0),this.options.resizable&&C.bind("smartresize.isotope",function(){l.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(t){var e=this.options.itemSelector,i=e?t.filter(e).add(t.find(e)):t,n={position:"absolute"};return i=i.filter(function(t,e){return 1===e.nodeType}),this.usingTransforms&&(n.left=0,n.top=0),i.css(n).addClass(this.options.itemClass),this.updateSortData(i,!0),i},_init:function(t){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(t)},option:function(t){if(e.isPlainObject(t)){this.options=e.extend(!0,this.options,t);var i;for(var n in t)i="_update"+r(n),this[i]&&this[i]()}},_updateAnimationEngine:function(){var t=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,""),e;switch(t){case"css":case"none":e=!1;break;case"jquery":e=!0;break;default:e=!s.csstransitions}this.isUsingJQueryAnimation=e,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var t=this.usingTransforms=this.options.transformsEnabled&&s.csstransforms&&s.csstransitions&&!this.isUsingJQueryAnimation;t||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=t?this._translate:this._positionAbs},_filter:function(t){var e=""===this.options.filter?"*":this.options.filter;if(!e)return t;var i=this.options.hiddenClass,n="."+i,o=t.filter(n),s=o;if("*"!==e){s=o.filter(e);var r=t.not(n).not(e).addClass(i);this.styleQueue.push({$el:r,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:s,style:this.options.visibleStyle}),s.removeClass(i),t.filter(e)},updateSortData:function(t,i){var n=this,o=this.options.getSortData,s,r;t.each(function(){s=e(this),r={};for(var t in o)r[t]=i||"original-order"!==t?o[t](s,n):e.data(this,"isotope-sort-data")[t];e.data(this,"isotope-sort-data",r)})},_sort:function(){var t=this.options.sortBy,e=this._getSorter,i=this.options.sortAscending?1:-1,n=function(n,o){var s=e(n,t),r=e(o,t);return s===r&&"original-order"!==t&&(s=e(n,"original-order"),r=e(o,"original-order")),(s>r?1:r>s?-1:0)*i};this.$filteredAtoms.sort(n)},_getSorter:function(t,i){return e.data(t,"isotope-sort-data")[i]},_translate:function(t,e){return{translate:[t,e]}},_positionAbs:function(t,e){return{left:t,top:e}},_pushPosition:function(t,e,i){e=Math.round(e+this.offset.left),i=Math.round(i+this.offset.top);var n=this.getPositionStyles(e,i);this.styleQueue.push({$el:t,style:n}),this.options.itemPositionDataEnabled&&t.data("isotope-item-position",{x:e,y:i})},layout:function(t,e){var i=this.options.layoutMode;if(this["_"+i+"Layout"](t),this.options.resizesContainer){var n=this["_"+i+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:n})}this._processStyleQueue(t,e),this.isLaidOut=!0},_processStyleQueue:function(t,i){var n=this.isLaidOut&&this.isUsingJQueryAnimation?"animate":"css",o=this.options.animationOptions,r=this.options.onLayout,a,l,h,c;if(l=function(t,e){e.$el[n](e.style,o)},this._isInserting&&this.isUsingJQueryAnimation)l=function(t,e){a=e.$el.hasClass("no-transition")?"css":n,e.$el[a](e.style,o)};else if(i||r||o.complete){var d=!1,u=[i,r,o.complete],p=this;if(h=!0,c=function(){if(!d){for(var e,i=0,n=u.length;n>i;i++)e=u[i],"function"==typeof e&&e.call(p.element,t,p);d=!0}},this.isUsingJQueryAnimation&&"animate"===n)o.complete=c,h=!1;else if(s.csstransitions){for(var f=0,m=this.styleQueue[0],g=m&&m.$el,w;!g||!g.length;){if(w=this.styleQueue[f++],!w)return;g=w.$el}var x=parseFloat(getComputedStyle(g[0])[y]);x>0&&(l=function(t,e){e.$el[n](e.style,o).one(v,c)},h=!1)}}e.each(this.styleQueue,l),h&&c(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(t){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,t)},addItems:function(t,e){var i=this._getAtoms(t);this.$allAtoms=this.$allAtoms.add(i),e&&e(i)},insert:function(t,e){this.element.append(t);var i=this;this.addItems(t,function(t){var n=i._filter(t);i._addHideAppended(n),i._sort(),i.reLayout(),i._revealAppended(n,e)})},appended:function(t,e){var i=this;this.addItems(t,function(t){i._addHideAppended(t),i.layout(t),i._revealAppended(t,e)})},_addHideAppended:function(t){this.$filteredAtoms=this.$filteredAtoms.add(t),t.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:t,style:this.options.hiddenStyle})},_revealAppended:function(t,e){var i=this;setTimeout(function(){t.removeClass("no-transition"),i.styleQueue.push({$el:t,style:i.options.visibleStyle}),i._isInserting=!1,i._processStyleQueue(t,e)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(t,e){this.$allAtoms=this.$allAtoms.not(t),this.$filteredAtoms=this.$filteredAtoms.not(t);var i=this,n=function(){t.remove(),e&&e.call(i.element)};t.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:t,style:this.options.hiddenStyle}),this._sort(),this.reLayout(n)):n()},shuffle:function(t){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(t)},destroy:function(){var t=this.usingTransforms,e=this.options;this.$allAtoms.removeClass(e.hiddenClass+" "+e.itemClass).each(function(){var e=this.style;e.position="",e.top="",e.left="",e.opacity="",t&&(e[h]="")});var i=this.element[0].style;for(var n in this.originalStyle)i[n]=this.originalStyle[n];this.element.unbind(".isotope").undelegate("."+e.hiddenClass,"click").removeClass(e.containerClass).removeData("isotope"),C.unbind(".isotope")},_getSegments:function(t){var e=this.options.layoutMode,i=t?"rowHeight":"columnWidth",n=t?"height":"width",o=t?"rows":"cols",s=this.element[n](),a,l=this.options[e]&&this.options[e][i]||this.$filteredAtoms["outer"+r(n)](!0)||s;a=Math.floor(s/l),a=Math.max(a,1),this[e][o]=a,this[e][i]=l},_checkIfSegmentsChanged:function(t){var e=this.options.layoutMode,i=t?"rows":"cols",n=this[e][i];return this._getSegments(t),this[e][i]!==n},_masonryReset:function(){this.masonry={},this._getSegments();var t=this.masonry.cols;for(this.masonry.colYs=[];t--;)this.masonry.colYs.push(0)},_masonryLayout:function(t){var i=this,n=i.masonry;t.each(function(){var t=e(this),o=Math.ceil(t.outerWidth(!0)/n.columnWidth);if(o=Math.min(o,n.cols),1===o)i._masonryPlaceBrick(t,n.colYs);else{var s=n.cols+1-o,r=[],a,l;for(l=0;s>l;l++)a=n.colYs.slice(l,l+o),r[l]=Math.max.apply(Math,a);i._masonryPlaceBrick(t,r)}})},_masonryPlaceBrick:function(t,e){for(var i=Math.min.apply(Math,e),n=0,o=0,s=e.length;s>o;o++)if(e[o]===i){n=o;break}var r=this.masonry.columnWidth*n,a=i;this._pushPosition(t,r,a);var l=i+t.outerHeight(!0),h=this.masonry.cols+1-s;for(o=0;h>o;o++)this.masonry.colYs[n+o]=l},_masonryGetContainerSize:function(){var t=Math.max.apply(Math,this.masonry.colYs);return{height:t}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(t){var i=this,n=this.element.width(),o=this.fitRows;t.each(function(){var t=e(this),s=t.outerWidth(!0),r=t.outerHeight(!0);0!==o.x&&s+o.x>n&&(o.x=0,o.y=o.height),i._pushPosition(t,o.x,o.y),o.height=Math.max(o.y+r,o.height),o.x+=s})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(t){var i=this,n=this.cellsByRow;t.each(function(){var t=e(this),o=n.index%n.cols,s=Math.floor(n.index/n.cols),r=(o+.5)*n.columnWidth-t.outerWidth(!0)/2,a=(s+.5)*n.rowHeight-t.outerHeight(!0)/2;i._pushPosition(t,r,a),n.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(t){var i=this;t.each(function(t){var n=e(this);i._pushPosition(n,0,i.straightDown.y),i.straightDown.y+=n.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var t=this.masonryHorizontal.rows;for(this.masonryHorizontal.rowXs=[];t--;)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(t){var i=this,n=i.masonryHorizontal;t.each(function(){var t=e(this),o=Math.ceil(t.outerHeight(!0)/n.rowHeight);if(o=Math.min(o,n.rows),1===o)i._masonryHorizontalPlaceBrick(t,n.rowXs);else{var s=n.rows+1-o,r=[],a,l;for(l=0;s>l;l++)a=n.rowXs.slice(l,l+o),r[l]=Math.max.apply(Math,a);i._masonryHorizontalPlaceBrick(t,r)}})},_masonryHorizontalPlaceBrick:function(t,e){for(var i=Math.min.apply(Math,e),n=0,o=0,s=e.length;s>o;o++)if(e[o]===i){n=o;break}var r=i,a=this.masonryHorizontal.rowHeight*n;this._pushPosition(t,r,a);var l=i+t.outerWidth(!0),h=this.masonryHorizontal.rows+1-s;for(o=0;h>o;o++)this.masonryHorizontal.rowXs[n+o]=l},_masonryHorizontalGetContainerSize:function(){var t=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:t}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(t){var i=this,n=this.element.height(),o=this.fitColumns;t.each(function(){var t=e(this),s=t.outerWidth(!0),r=t.outerHeight(!0);0!==o.y&&r+o.y>n&&(o.x=o.width,o.y=0),i._pushPosition(t,o.x,o.y),o.width=Math.max(o.x+s,o.width),o.y+=r})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(t){var i=this,n=this.cellsByColumn;t.each(function(){var t=e(this),o=Math.floor(n.index/n.rows),s=n.index%n.rows,r=(o+.5)*n.columnWidth-t.outerWidth(!0)/2,a=(s+.5)*n.rowHeight-t.outerHeight(!0)/2;i._pushPosition(t,r,a),n.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(t){var i=this;t.each(function(t){var n=e(this);i._pushPosition(n,i.straightAcross.x,0),i.straightAcross.x+=n.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},e.fn.imagesLoaded=function(t){function i(){t.call(o,s)}function n(t){var o=t.target;o.src!==a&&-1===e.inArray(o,l)&&(l.push(o),--r<=0&&(setTimeout(i),s.unbind(".imagesLoaded",n)))}var o=this,s=o.find("img").add(o.filter("img")),r=s.length,a="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",l=[];return r||i(),s.bind("load.imagesLoaded error.imagesLoaded",n).each(function(){var t=this.src;this.src=a,this.src=t}),o};var k=function(e){t.console&&t.console.error(e)};e.fn.isotope=function(t,i){if("string"==typeof t){var n=Array.prototype.slice.call(arguments,1);this.each(function(){var i=e.data(this,"isotope");return i?e.isFunction(i[t])&&"_"!==t.charAt(0)?void i[t].apply(i,n):void k("no such method '"+t+"' for isotope instance"):void k("cannot call methods on isotope prior to initialization; attempted to call method '"+t+"'")})}else this.each(function(){var n=e.data(this,"isotope");n?(n.option(t),n._init(i)):e.data(this,"isotope",new e.Isotope(t,this,i))});return this}}(window,jQuery),jQuery.Isotope.prototype._getMasonryGutterColumns=function(){var t=this.options.masonry&&this.options.masonry.gutterWidth||0;containerWidth=this.element.width(),this.masonry.columnWidth=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(!0)||containerWidth,this.masonry.columnWidth+=t,this.masonry.cols=Math.floor((containerWidth+t)/this.masonry.columnWidth),this.masonry.cols=Math.max(this.masonry.cols,1)},jQuery.Isotope.prototype._masonryReset=function(){this.masonry={},this._getMasonryGutterColumns();var t=this.masonry.cols;for(this.masonry.colYs=[];t--;)this.masonry.colYs.push(0)},jQuery.Isotope.prototype._masonryResizeChanged=function(){var t=this.masonry.cols;return this._getMasonryGutterColumns(),this.masonry.cols!==t},function(t,e,$,i){"use strict";var n=$("html"),o=$(t),s=$(e),r=$.envirabox=function(){r.open.apply(this,arguments)},a=navigator.userAgent.match(/msie/i),l=null,h=e.createTouch!==i,c=function(t){return t&&t.hasOwnProperty&&t instanceof $},d=function(t){return t&&"string"===$.type(t)},u=function(t){return d(t)&&t.indexOf("%")>0},p=function(t){return t&&!(t.style.overflow&&"hidden"===t.style.overflow)&&(t.clientWidth&&t.scrollWidth>t.clientWidth||t.clientHeight&&t.scrollHeight>t.clientHeight)},f=function(t,e){var i=parseInt(t,10)||0;return e&&u(t)&&(i=r.getViewport()[e]/100*i),Math.ceil(i)},m=function(t,e){return f(t,e)+"px"};$.extend(r,{version:"2.1.5",defaults:{padding:15,margin:40,width:800,height:600,minWidth:100,minHeight:100,maxWidth:9999,maxHeight:9999,pixelRatio:1,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!h,fitToView:!0,aspectRatio:!1,topRatio:.5,leftRatio:.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3e3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-envirabox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="envirabox-wrap" tabIndex="-1"><div class="envirabox-skin"><div class="envirabox-outer"><div class="envirabox-inner"></div></div></div></div>',image:'<img class="envirabox-image" src="{href}" alt="" />',iframe:'<iframe id="envirabox-frame{rnd}" name="envirabox-frame{rnd}" class="envirabox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+(a?' allowtransparency="true"':"")+"></iframe>",error:'<p class="envirabox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="envirabox-item envirabox-close" href="javascript:;"></a>',next:'<a title="Next" class="envirabox-nav envirabox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="envirabox-nav envirabox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:$.noop,beforeLoad:$.noop,afterLoad:$.noop,beforeShow:$.noop,afterShow:$.noop,beforeChange:$.noop,beforeClose:$.noop,afterClose:$.noop},group:{},opts:{},previous:null,coming:null,current:null,isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(t,e){return t&&($.isPlainObject(e)||(e={}),!1!==r.close(!0))?($.isArray(t)||(t=c(t)?$(t).get():[t]),$.each(t,function(n,o){var s={},a,l,h,u,p,f,m;"object"===$.type(o)&&(o.nodeType&&(o=$(o)),c(o)?(s={href:o.data("envirabox-href")||o.attr("href"),title:$("<div/>").text(o.data("envirabox-title")||o.attr("title")).html(),isDom:!0,element:o},$.metadata&&$.extend(!0,s,o.metadata())):s=o),a=e.href||s.href||(d(o)?o:null),l=e.title!==i?e.title:s.title||"",h=e.content||s.content,u=h?"html":e.type||s.type,!u&&s.isDom&&(u=o.data("envirabox-type"),u||(p=o.prop("class").match(/envirabox\.(\w+)/),u=p?p[1]:null)),d(a)&&(u||(r.isImage(a)?u="image":r.isSWF(a)?u="swf":"#"===a.charAt(0)?u="inline":d(o)&&(u="html",h=o)),"ajax"===u&&(f=a.split(/\s+/,2),a=f.shift(),m=f.shift())),h||("inline"===u?a?h=$(d(a)?a.replace(/.*(?=#[^\s]+$)/,""):a):s.isDom&&(h=o):"html"===u?h=a:u||a||!s.isDom||(u="inline",h=o)),$.extend(s,{href:a,type:u,content:h,title:l,selector:m}),t[n]=s}),r.opts=$.extend(!0,{},r.defaults,e),e.keys!==i&&(r.opts.keys=e.keys?$.extend({},r.defaults.keys,e.keys):!1),r.group=t,r._start(r.opts.index)):void 0},cancel:function(){var t=r.coming;t&&!1===r.trigger("onCancel")||(r.hideLoading(),t&&(r.ajaxLoad&&r.ajaxLoad.abort(),r.ajaxLoad=null,r.imgPreload&&(r.imgPreload.onload=r.imgPreload.onerror=null),t.wrap&&t.wrap.stop(!0,!0).trigger("onReset").remove(),r.coming=null,r.current||r._afterZoomOut(t)))},close:function(t){r.cancel(),!1!==r.trigger("beforeClose")&&(r.unbindEvents(),r.isActive&&(r.isOpen&&t!==!0?(r.isOpen=r.isOpened=!1,r.isClosing=!0,$(".envirabox-item, .envirabox-nav").remove(),r.wrap.stop(!0,!0).removeClass("envirabox-opened"),r.transitions[r.current.closeMethod]()):($(".envirabox-wrap").stop(!0).trigger("onReset").remove(),r._afterZoomOut())))},play:function(t){var e=function(){clearTimeout(r.player.timer)},i=function(){e(),r.current&&r.player.isActive&&(r.player.timer=setTimeout(r.next,r.current.playSpeed))},n=function(){e(),s.unbind(".player"),r.player.isActive=!1,r.trigger("onPlayEnd")},o=function(){r.current&&(r.current.loop||r.current.index<r.group.length-1)&&(r.player.isActive=!0,s.bind({"onCancel.player beforeClose.player":n,"onUpdate.player":i,"beforeLoad.player":e}),i(),r.trigger("onPlayStart"))};t===!0||!r.player.isActive&&t!==!1?o():n()},next:function(t){var e=r.current;e&&(d(t)||(t=e.direction.next),r.jumpto(e.index+1,t,"next"))},prev:function(t){var e=r.current;e&&(d(t)||(t=e.direction.prev),r.jumpto(e.index-1,t,"prev"))},jumpto:function(t,e,n){var o=r.current;o&&(t=f(t),r.direction=e||o.direction[t>=o.index?"next":"prev"],r.router=n||"jumpto",o.loop&&(0>t&&(t=o.group.length+t%o.group.length),t%=o.group.length),o.group[t]!==i&&(r.cancel(),r._start(t)))},reposition:function(t,e){var i=r.current,n=i?i.wrap:null,o;n&&(o=r._getPosition(e),t&&"scroll"===t.type?(delete o.position,n.stop(!0,!0).animate(o,200)):(n.css(o),i.pos=$.extend({},i.dim,o)))},update:function(t){var e=t&&t.originalEvent&&t.originalEvent.type,i=!e||"orientationchange"===e;i&&(clearTimeout(l),l=null),r.isOpen&&!l&&(l=setTimeout(function(){var n=r.current;n&&!r.isClosing&&(r.wrap.removeClass("envirabox-tmp"),(i||"load"===e||"resize"===e&&n.autoResize)&&r._setDimension(),"scroll"===e&&n.canShrink||r.reposition(t),r.trigger("onUpdate"),l=null)},i&&!h?0:300))},toggle:function(t){r.isOpen&&(r.current.fitToView="boolean"===$.type(t)?t:!r.current.fitToView,h&&(r.wrap.removeAttr("style").addClass("envirabox-tmp"),r.trigger("onUpdate")),r.update())},hideLoading:function(){s.unbind(".loading"),$("#envirabox-loading").remove()},showLoading:function(){var t,e;r.hideLoading(),t=$('<div id="envirabox-loading"><div></div></div>').click(r.cancel).appendTo("body"),s.bind("keydown.loading",function(t){27===(t.which||t.keyCode)&&(t.preventDefault(),r.cancel())}),r.defaults.fixed||(e=r.getViewport(),t.css({position:"absolute",top:.5*e.h+e.y,left:.5*e.w+e.x})),r.trigger("onLoading")},getViewport:function(){var e=r.current&&r.current.locked||!1,i={x:o.scrollLeft(),y:o.scrollTop()};return e&&e.length?(i.w=e[0].clientWidth,i.h=e[0].clientHeight):(i.w=h&&t.innerWidth?t.innerWidth:o.width(),i.h=h&&t.innerHeight?t.innerHeight:o.height()),i},unbindEvents:function(){r.wrap&&c(r.wrap)&&r.wrap.unbind(".fb"),s.unbind(".fb"),o.unbind(".fb")},bindEvents:function(){var t=r.current,e;t&&(o.bind("orientationchange.fb"+(h?"":" resize.fb")+(t.autoCenter&&!t.locked?" scroll.fb":""),r.update),e=t.keys,e&&s.bind("keydown.fb",function(n){var o=n.which||n.keyCode,s=n.target||n.srcElement;return 27===o&&r.coming?!1:void(n.ctrlKey||n.altKey||n.shiftKey||n.metaKey||s&&(s.type||$(s).is("[contenteditable]"))||$.each(e,function(e,s){return t.group.length>1&&s[o]!==i?(r[e](s[o]),n.preventDefault(),!1):$.inArray(o,s)>-1?(r[e](),n.preventDefault(),!1):void 0}))}),$.fn.mousewheel&&t.mouseWheel&&r.wrap.bind("mousewheel.fb",function(e,i,n,o){for(var s=e.target||null,a=$(s),l=!1;a.length&&!(l||a.is(".envirabox-skin")||a.is(".envirabox-wrap"));)l=p(a[0]),a=$(a).parent();0===i||l||r.group.length>1&&!t.canShrink&&(o>0||n>0?r.prev(o>0?"down":"left"):(0>o||0>n)&&r.next(0>o?"up":"right"),e.preventDefault())}))},trigger:function(t,e){var i,n=e||r.coming||r.current;if(n){if($.isFunction(n[t])&&(i=n[t].apply(n,Array.prototype.slice.call(arguments,1))),i===!1)return!1;n.helpers&&$.each(n.helpers,function(e,i){i&&r.helpers[e]&&$.isFunction(r.helpers[e][t])&&r.helpers[e][t]($.extend(!0,{},r.helpers[e].defaults,i),n)})}s.trigger(t)},isImage:function(t){return d(t)&&t.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)},isSWF:function(t){return d(t)&&t.match(/\.(swf)((\?|#).*)?$/i)},_start:function(t){var e={},i,n,o,s,a;if(t=f(t),i=r.group[t]||null,!i)return!1;if(e=$.extend(!0,{},r.opts,i),s=e.margin,a=e.padding,"number"===$.type(s)&&(e.margin=[s,s,s,s]),"number"===$.type(a)&&(e.padding=[a,a,a,a]),e.modal&&$.extend(!0,e,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}}),e.autoSize&&(e.autoWidth=e.autoHeight=!0),"auto"===e.width&&(e.autoWidth=!0),"auto"===e.height&&(e.autoHeight=!0),e.group=r.group,e.index=t,r.coming=e,!1===r.trigger("beforeLoad"))return void(r.coming=null);if(o=e.type,n=e.href,!o)return r.coming=null,r.current&&r.router&&"jumpto"!==r.router?(r.current.index=t,r[r.router](r.direction)):!1;if(r.isActive=!0,("image"===o||"swf"===o)&&(e.autoHeight=e.autoWidth=!1,e.scrolling="visible"),"image"===o&&(e.aspectRatio=!0),"iframe"===o&&h&&(e.scrolling="scroll"),e.wrap=$(e.tpl.wrap).addClass("envirabox-"+(h?"mobile":"desktop")+" envirabox-type-"+o+" envirabox-tmp "+e.wrapCSS).appendTo(e.parent||"body"),$.extend(e,{skin:$(".envirabox-skin",e.wrap),outer:$(".envirabox-outer",e.wrap),inner:$(".envirabox-inner",e.wrap)}),$.each(["Top","Right","Bottom","Left"],function(t,i){e.skin.css("padding"+i,m(e.padding[t]))}),r.trigger("onReady"),"inline"===o||"html"===o){if(!e.content||!e.content.length)return r._error("content")}else if(!n)return r._error("href");"image"===o?r._loadImage():"ajax"===o?r._loadAjax():"iframe"===o?r._loadIframe():r._afterLoad()},_error:function(t){$.extend(r.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:t,content:r.coming.tpl.error}),r._afterLoad()},_loadImage:function(){var t=r.imgPreload=new Image;t.onload=function(){this.onload=this.onerror=null,r.coming.width=this.width/r.opts.pixelRatio,r.coming.height=this.height/r.opts.pixelRatio,r._afterLoad()},t.onerror=function(){this.onload=this.onerror=null,r._error("image")},t.src=r.coming.href,t.complete!==!0&&r.showLoading()},_loadAjax:function(){var t=r.coming;r.showLoading(),r.ajaxLoad=$.ajax($.extend({},t.ajax,{url:t.href,error:function(t,e){r.coming&&"abort"!==e?r._error("ajax",t):r.hideLoading()},success:function(e,i){"success"===i&&(t.content=e,r._afterLoad())}}))},_loadIframe:function(){var t=r.coming,e=$(t.tpl.iframe.replace(/\{rnd\}/g,(new Date).getTime())).attr("scrolling",h?"auto":t.iframe.scrolling).attr("src",t.href);$(t.wrap).bind("onReset",function(){try{$(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(t){}}),t.iframe.preload&&(r.showLoading(),e.one("load",function(){$(this).data("ready",1),h||$(this).bind("load.fb",r.update),$(this).parents(".envirabox-wrap").width("100%").removeClass("envirabox-tmp").show(),r._afterLoad()})),t.content=e.appendTo(t.inner),t.iframe.preload||r._afterLoad()},_preloadImages:function(){var t=r.group,e=r.current,i=t.length,n=e.preload?Math.min(e.preload,i-1):0,o,s;for(s=1;n>=s;s+=1)o=t[(e.index+s)%i],"image"===o.type&&o.href&&((new Image).src=o.href)},_afterLoad:function(){var t=r.coming,e=r.current,i="envirabox-placeholder",n,o,s,a,l,h;if(r.hideLoading(),t&&r.isActive!==!1){if(!1===r.trigger("afterLoad",t,e))return t.wrap.stop(!0).trigger("onReset").remove(),void(r.coming=null);switch(e&&(r.trigger("beforeChange",e),e.wrap.stop(!0).removeClass("envirabox-opened").find(".envirabox-item, .envirabox-nav").remove()),r.unbindEvents(),n=t,o=t.content,s=t.type,a=t.scrolling,$.extend(r,{wrap:n.wrap,skin:n.skin,outer:n.outer,inner:n.inner,current:n,previous:e}),l=n.href,s){case"inline":case"ajax":case"html":n.selector?o=$("<div>").html(o).find(n.selector):c(o)&&(o.data(i)||o.data(i,$('<div class="'+i+'"></div>').insertAfter(o).hide()),o=o.show().detach(),n.wrap.bind("onReset",function(){$(this).find(o).length&&o.hide().replaceAll(o.data(i)).data(i,!1)}));break;case"image":o=n.tpl.image.replace(/\{href\}/g,l);break;case"swf":o='<object id="envirabox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+l+'"></param>',h="",$.each(n.swf,function(t,e){o+='<param name="'+t+'" value="'+e+'"></param>',h+=" "+t+'="'+e+'"'}),o+='<embed src="'+l+'" type="application/x-shockwave-flash" width="100%" height="100%"'+h+"></embed></object>"}c(o)&&o.parent().is(n.inner)||n.inner.append(o),r.trigger("beforeShow"),n.inner.css("overflow","yes"===a?"scroll":"no"===a?"hidden":a),r._setDimension(),r.reposition(),r.isOpen=!1,r.coming=null,r.bindEvents(),r.isOpened?e.prevMethod&&r.transitions[e.prevMethod]():$(".envirabox-wrap").not(n.wrap).stop(!0).trigger("onReset").remove(),r.transitions[r.isOpened?n.nextMethod:n.openMethod](),r._preloadImages()
}},_setDimension:function(){var t=r.getViewport(),e=0,i=!1,n=!1,o=r.wrap,s=r.skin,a=r.inner,l=r.current,h=l.width,c=l.height,d=l.minWidth,p=l.minHeight,g=l.maxWidth,v=l.maxHeight,y=l.scrolling,w=l.scrollOutside?l.scrollbarWidth:0,x=l.margin,b=f(x[1]+x[3]),_=f(x[0]+x[2]),C,k,A,S,M,z,H,R,T,W,P,L,O,I,D;if(o.add(s).add(a).width("auto").height("auto").removeClass("envirabox-tmp"),C=f(s.outerWidth(!0)-s.width()),k=f(s.outerHeight(!0)-s.height()),A=b+C,S=_+k,M=u(h)?(t.w-A)*f(h)/100:h,z=u(c)?(t.h-S)*f(c)/100:c,"iframe"===l.type){if(I=l.content,l.autoHeight&&1===I.data("ready"))try{I[0].contentWindow.document.location&&(a.width(M).height(9999),D=I.contents().find("body"),w&&D.css("overflow-x","hidden"),z=D.outerHeight(!0))}catch(E){}}else(l.autoWidth||l.autoHeight)&&(a.addClass("envirabox-tmp"),l.autoWidth||a.width(M),l.autoHeight||a.height(z),l.autoWidth&&(M=a.width()),l.autoHeight&&(z=a.height()),a.removeClass("envirabox-tmp"));if(h=f(M),c=f(z),T=M/z,d=f(u(d)?f(d,"w")-A:d),g=f(u(g)?f(g,"w")-A:g),p=f(u(p)?f(p,"h")-S:p),v=f(u(v)?f(v,"h")-S:v),H=g,R=v,l.fitToView&&(g=Math.min(t.w-A,g),v=Math.min(t.h-S,v)),L=t.w-b,O=t.h-_,l.aspectRatio?(h>g&&(h=g,c=f(h/T)),c>v&&(c=v,h=f(c*T)),d>h&&(h=d,c=f(h/T)),p>c&&(c=p,h=f(c*T))):(h=Math.max(d,Math.min(h,g)),l.autoHeight&&"iframe"!==l.type&&(a.width(h),c=a.height()),c=Math.max(p,Math.min(c,v))),l.fitToView)if(a.width(h).height(c),o.width(h+C),W=o.width(),P=o.height(),l.aspectRatio)for(;(W>L||P>O)&&h>d&&c>p&&!(e++>19);)c=Math.max(p,Math.min(v,c-10)),h=f(c*T),d>h&&(h=d,c=f(h/T)),h>g&&(h=g,c=f(h/T)),a.width(h).height(c),o.width(h+C),W=o.width(),P=o.height();else h=Math.max(d,Math.min(h,h-(W-L))),c=Math.max(p,Math.min(c,c-(P-O)));w&&"auto"===y&&z>c&&L>h+C+w&&(h+=w),a.width(h).height(c),o.width(h+C),W=o.width(),P=o.height(),i=(W>L||P>O)&&h>d&&c>p,n=l.aspectRatio?H>h&&R>c&&M>h&&z>c:(H>h||R>c)&&(M>h||z>c),$.extend(l,{dim:{width:m(W),height:m(P)},origWidth:M,origHeight:z,canShrink:i,canExpand:n,wPadding:C,hPadding:k,wrapSpace:P-s.outerHeight(!0),skinSpace:s.height()-c}),!I&&l.autoHeight&&c>p&&v>c&&!n&&a.height("auto")},_getPosition:function(t){var e=r.current,i=r.getViewport(),n=e.margin,o=r.wrap.width()+n[1]+n[3],s=r.wrap.height()+n[0]+n[2],a={position:"absolute",top:n[0],left:n[3]};return e.helpers.title.type&&"float"==e.helpers.title.type&&(s+=$(".envirabox-skin .envirabox-title").height()),e.autoCenter&&e.fixed&&!t&&s<=i.h&&o<=i.w?a.position="fixed":e.locked||(a.top+=i.y,a.left+=i.x),a.top=m(Math.max(a.top,a.top+(i.h-s)*e.topRatio)),a.left=m(Math.max(a.left,a.left+(i.w-o)*e.leftRatio)),a},_afterZoomIn:function(){var t=r.current;t&&(r.isOpen=r.isOpened=!0,r.wrap.css("overflow","visible").addClass("envirabox-opened").hide().show(0),r.update(),(t.closeClick||t.nextClick&&r.group.length>1)&&r.inner.css("cursor","pointer").bind("click.fb",function(e){$(e.target).is("a")||$(e.target).parent().is("a")||(e.preventDefault(),r[t.closeClick?"close":"next"]())}),t.closeBtn&&$(t.tpl.closeBtn).appendTo(r.skin).bind("click.fb",function(t){t.preventDefault(),r.close()}),t.arrows&&r.group.length>1&&((t.loop||t.index>0)&&$(t.tpl.prev).appendTo(r.outer).bind("click.fb",r.prev),(t.loop||t.index<r.group.length-1)&&$(t.tpl.next).appendTo(r.outer).bind("click.fb",r.next)),r.trigger("afterShow"),t.loop||t.index!==t.group.length-1?r.opts.autoPlay&&!r.player.isActive&&(r.opts.autoPlay=!1,r.play(!0)):r.play(!1))},_afterZoomOut:function(t){t=t||r.current,$(".envirabox-wrap").trigger("onReset").remove(),$.extend(r,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null}),r.trigger("afterClose",t)}}),r.transitions={getOrigPosition:function(){var t=r.current,e=t.element,i=t.orig,n={},o=50,s=50,a=t.hPadding,l=t.wPadding,h=r.getViewport();return!i&&t.isDom&&e.is(":visible")&&(i=e.find("img:first"),i.length||(i=e)),c(i)?(n=i.offset(),i.is("img")&&(o=i.outerWidth(),s=i.outerHeight())):(n.top=h.y+(h.h-s)*t.topRatio,n.left=h.x+(h.w-o)*t.leftRatio),("fixed"===r.wrap.css("position")||t.locked)&&(n.top-=h.y,n.left-=h.x),n={top:m(n.top-a*t.topRatio),left:m(n.left-l*t.leftRatio),width:m(o+l),height:m(s+a)}},step:function(t,e){var i,n,o,s=e.prop,a=r.current,l=a.wrapSpace,h=a.skinSpace;("width"===s||"height"===s)&&(i=e.end===e.start?1:(t-e.start)/(e.end-e.start),r.isClosing&&(i=1-i),n="width"===s?a.wPadding:a.hPadding,o=t-n,r.skin[s](f("width"===s?o:o-l*i)),r.inner[s](f("width"===s?o:o-l*i-h*i)))},zoomIn:function(){var t=r.current,e=t.pos,i=t.openEffect,n="elastic"===i,o=$.extend({opacity:1},e);delete o.position,n?(e=this.getOrigPosition(),t.openOpacity&&(e.opacity=.1)):"fade"===i&&(e.opacity=.1),r.wrap.css(e).animate(o,{duration:"none"===i?0:t.openSpeed,easing:t.openEasing,step:n?this.step:null,complete:r._afterZoomIn})},zoomOut:function(){var t=r.current,e=t.closeEffect,i="elastic"===e,n={opacity:.1};i&&(n=this.getOrigPosition(),t.closeOpacity&&(n.opacity=.1)),r.wrap.animate(n,{duration:"none"===e?0:t.closeSpeed,easing:t.closeEasing,step:i?this.step:null,complete:r._afterZoomOut})},changeIn:function(){var t=r.current,e=t.nextEffect,i=t.pos,n={opacity:1},o=r.direction,s=200,a;i.opacity=.1,"elastic"===e&&(a="down"===o||"up"===o?"top":"left","down"===o||"right"===o?(i[a]=m(f(i[a])-s),n[a]="+="+s+"px"):(i[a]=m(f(i[a])+s),n[a]="-="+s+"px")),"none"===e?r._afterZoomIn():r.wrap.css(i).animate(n,{duration:t.nextSpeed,easing:t.nextEasing,complete:r._afterZoomIn})},changeOut:function(){var t=r.previous,e=t.prevEffect,i={opacity:.1},n=r.direction,o=200;"elastic"===e&&(i["down"===n||"up"===n?"top":"left"]=("up"===n||"left"===n?"-":"+")+"="+o+"px"),t.wrap.animate(i,{duration:"none"===e?0:t.prevSpeed,easing:t.prevEasing,complete:function(){$(this).trigger("onReset").remove()}})}},r.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!h,fixed:!0},overlay:null,fixed:!1,el:$("html"),create:function(t){var e;t=$.extend({},this.defaults,t),this.overlay&&this.close(),e=r.coming?r.coming.parent:t.parent,this.overlay=$('<div class="envirabox-overlay"></div>').appendTo(e&&e.lenth?e:"body"),this.fixed=!1,t.fixed&&r.defaults.fixed&&(this.overlay.addClass("envirabox-overlay-fixed"),this.fixed=!0)},open:function(t){var e=this;t=$.extend({},this.defaults,t),this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(t),this.fixed||(o.bind("resize.overlay",$.proxy(this.update,this)),this.update()),t.closeClick&&this.overlay.bind("click.overlay",function(t){return $(t.target).hasClass("envirabox-overlay")?(r.isActive?r.close():e.close(),!1):void 0}),this.overlay.css(t.css).show()},close:function(){o.unbind("resize.overlay"),this.el.hasClass("envirabox-lock")&&($(".envirabox-margin").removeClass("envirabox-margin"),this.el.removeClass("envirabox-lock"),o.scrollTop(this.scrollV).scrollLeft(this.scrollH)),$(".envirabox-overlay").remove().hide(),$.extend(this,{overlay:null,fixed:!1})},update:function(){var t="100%",i;this.overlay.width(t).height("100%"),a?(i=Math.max(e.documentElement.offsetWidth,e.body.offsetWidth),s.width()>i&&(t=s.width())):s.width()>o.width()&&(t=s.width()),this.overlay.width(t).height(s.height())},onReady:function(t,e){var i=this.overlay;$(".envirabox-overlay").stop(!0,!0),i||this.create(t),t.locked&&this.fixed&&e.fixed&&(e.locked=this.overlay.append(e.wrap),e.fixed=!1),t.showEarly===!0&&this.beforeShow.apply(this,arguments)},beforeShow:function(t,e){e.locked&&!this.el.hasClass("envirabox-lock")&&(this.fixPosition!==!1&&$("*").filter(function(){return"fixed"===$(this).css("position")&&!$(this).hasClass("envirabox-overlay")&&!$(this).hasClass("envirabox-wrap")}).addClass("envirabox-margin"),this.el.addClass("envirabox-margin"),this.scrollV=o.scrollTop(),this.scrollH=o.scrollLeft(),this.el.addClass("envirabox-lock"),o.scrollTop(this.scrollV).scrollLeft(this.scrollH)),this.open(t)},onUpdate:function(){this.fixed||this.update()},afterClose:function(t){this.overlay&&!r.coming&&this.overlay.fadeOut(t.speedOut,$.proxy(this.close,this))}},r.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(t){var e=r.current,i=e.title,n=t.type,o,s;if($.isFunction(i)&&(i=i.call(e.element,e)),d(i)&&""!==$.trim(i)){switch(o=$('<div class="envirabox-title envirabox-title-'+n+'-wrap">'+i+"</div>"),n){case"inside":s=r.skin;break;case"outside":s=r.wrap;break;case"over":s=r.inner;break;default:s=r.skin,o.appendTo("body"),a&&o.width(o.width()),o.wrapInner('<span class="child"></span>'),r.current.margin[2]+=Math.abs(f(o.css("margin-bottom")))}o["top"===t.position?"prependTo":"appendTo"](s)}}},$.fn.envirabox=function(t){var e,i=$(this),n=this.selector||"",o=function(o){var s=$(this).blur(),a=e,l,h;o.ctrlKey||o.altKey||o.shiftKey||o.metaKey||s.is(".envirabox-wrap")||(l=t.groupAttr||"data-envirabox-group",h=s.attr(l),h||(l="rel",h=s.get(0)[l]),h&&""!==h&&"nofollow"!==h&&(s=n.length?$(n):i,s=s.filter("["+l+'="'+h+'"]'),a=s.index(this)),t.index=a,r.open(s,t)!==!1&&o.preventDefault())};return t=t||{},e=t.index||0,n&&t.live!==!1?s.undelegate(n,"click.fb-start").delegate(n+":not('.envirabox-item, .envirabox-nav')","click.fb-start",o):i.unbind("click.fb-start").bind("click.fb-start",o),this.filter("[data-envirabox-start=1]").trigger("click"),this},s.ready(function(){var e,o;$.scrollbarWidth===i&&($.scrollbarWidth=function(){var t=$('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),e=t.children(),i=e.innerWidth()-e.height(99).innerWidth();return t.remove(),i}),$.support.fixedPosition===i&&($.support.fixedPosition=function(){var t=$('<div style="position:fixed;top:20px;"></div>').appendTo("body"),e=20===t[0].offsetTop||15===t[0].offsetTop;return t.remove(),e}()),$.extend(r.defaults,{scrollbarWidth:$.scrollbarWidth(),fixed:$.support.fixedPosition,parent:$("body")}),e=$(t).width(),n.addClass("envirabox-lock-test"),o=$(t).width(),n.removeClass("envirabox-lock-test"),$("<style type='text/css'>.envirabox-margin{margin-right:"+(o-e)+"px;}</style>").appendTo("head")})}(window,document,jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function($){function t(t){var n=t||window.event,o=s.call(arguments,1),l=0,c=0,d=0,u=0,p=0,f=0;if(t=$.event.fix(n),t.type="mousewheel","detail"in n&&(d=-1*n.detail),"wheelDelta"in n&&(d=n.wheelDelta),"wheelDeltaY"in n&&(d=n.wheelDeltaY),"wheelDeltaX"in n&&(c=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(c=-1*d,d=0),l=0===d?c:d,"deltaY"in n&&(d=-1*n.deltaY,l=d),"deltaX"in n&&(c=n.deltaX,0===d&&(l=-1*c)),0!==d||0!==c){if(1===n.deltaMode){var m=$.data(this,"mousewheel-line-height");l*=m,d*=m,c*=m}else if(2===n.deltaMode){var g=$.data(this,"mousewheel-page-height");l*=g,d*=g,c*=g}if(u=Math.max(Math.abs(d),Math.abs(c)),(!a||a>u)&&(a=u,i(n,u)&&(a/=40)),i(n,u)&&(l/=40,c/=40,d/=40),l=Math[l>=1?"floor":"ceil"](l/a),c=Math[c>=1?"floor":"ceil"](c/a),d=Math[d>=1?"floor":"ceil"](d/a),h.settings.normalizeOffset&&this.getBoundingClientRect){var v=this.getBoundingClientRect();p=t.clientX-v.left,f=t.clientY-v.top}return t.deltaX=c,t.deltaY=d,t.deltaFactor=a,t.offsetX=p,t.offsetY=f,t.deltaMode=0,o.unshift(t,l,c,d),r&&clearTimeout(r),r=setTimeout(e,200),($.event.dispatch||$.event.handle).apply(this,o)}}function e(){a=null}function i(t,e){return h.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],o="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],s=Array.prototype.slice,r,a;if($.event.fixHooks)for(var l=n.length;l;)$.event.fixHooks[n[--l]]=$.event.mouseHooks;var h=$.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var e=o.length;e;)this.addEventListener(o[--e],t,!1);else this.onmousewheel=t;$.data(this,"mousewheel-line-height",h.getLineHeight(this)),$.data(this,"mousewheel-page-height",h.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=o.length;e;)this.removeEventListener(o[--e],t,!1);else this.onmousewheel=null;$.removeData(this,"mousewheel-line-height"),$.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var e=$(t),i=e["offsetParent"in $.fn?"offsetParent":"parent"]();return i.length||(i=$("body")),parseInt(i.css("fontSize"),10)||parseInt(e.css("fontSize"),10)||16},getPageHeight:function(t){return $(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};$.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),jQuery(document).ready(function($){var t="ontouchstart"in document.documentElement;t&&$("body").addClass("envira-touch")});